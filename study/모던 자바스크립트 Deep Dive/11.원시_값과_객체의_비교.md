# 11. 원시 값과 객체의 비교

- 원시 값을 변수에 할당하면 변수에는 **실제 값**이 저장된다.
- 객체를 변수에 할당하면 변수에는 **참조 값**이 저장된다.
- 원시 값을 갖는 변수를 다른 변수에 할당하면 **값이 복사**되어 전달된다.
- 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 **참조 값이 복사**되어 전달된다.

## 11.1 원시 값

### 11.1.1. 변경 불가능한 값

- 원시 타입의 값은 변경 불가능한 값이다.
- 변경 불가능하다는 것은 변수가 아니라 값에 대한 진술이다.
- 상수와 변경 불가능한 값을 동일시 하는것은 곤란하다. 상수는 재할당이 금지된 변수
- 원시값은 변경이 불가능하기 때문에 원시값을 갖는 변수에 값을 재할당하게되면 새로운 메모리공간을 확보하고 재할당할 값을 저장한 후 변수가 참조하던 메모리공간의 주소를 변경한다.
- 불변성을 갖는 원시 값을 할당한 변수는 재할당 이외에 변수 값을 변경 할 수 있는 방법이 없다.

### 11.1.2. 문자열과 불변성

- 문자열은 유사 배열 객체 이면서 이터러블이므로 배열과 유사하게 각 문자에 접근 할 수 있다.

> **유사 배열 객체**
> 유사배열 객체란 배열처럼 인덱스로 프로퍼티 값에 접근 할 수 있고 length 프로퍼티를 갖는 객체를 말한다.
> 문자열은 배열처럼 인덱스를 통해 각 문자열에 접근할 수 있으며 for문으로 순회 할 수 도 있다.

### 11.1.3. 값에 의한 전달

- A변수에 원시타입인 number 타입의 80 이라는 값을 할당하고 B변수에 A변수를 할당하면 원시값 80 이 복사되어 전달된다.
- A의 80과 B의 80은 다른 메모리 공간에 저장된 별개의 값이다. 즉 A의 값을 100으로 재할당 한다 해도 B는 아무런 영향을 받지 않는다.

## 11.2. 객체

> **자바스크립트 객체의 관리 방식**
> 자바스크립트 객체는 프로퍼티 키를 인덱스로 사용하는 해시테이블이라고 생각 할 수 있다. 실제로는 해시테이블과 비슷하지만 높은성능을 가진 다른 방법으로 객체를 구현한다.

- 객체지향 프로그래밍 언어에서는 사전정의된 클레스를 기반으로 객체를 생성한다. 하지만 자바스크립트는 클래스 없이 객체를 생성할 수 있으며 객체가 생성된 이후라도 프로퍼티를 추가 할 수 있다. 사용하기엔 매우 편리하지만 성능면에서는 이론적으로 클래스기반 객체지향 프로그래밍언어의 객체보다 생성과 프로퍼티 접근에 비용이 더 많이 드는 비효율적인 방식이다.
- 이를 해결하기 위해 히든 클래스(hidden class)라는 방식을 사용해 C++ 객체의 프로퍼티에 접근하는 정도이 성능을 보장한다.

### 11.2.1. 변경 가능한 값

- 객체(참조) 타입의 값은 변경 가능한 값이다.
- 원시값이 할당된 변수는 '변수는 x값을 갖는다.'라고 표현하지만 객체를 할당한 변수의 경우 '변수는 객체를 참조하고 있다', '변수는 객체를 가리키고 있다'라고 표현한다.
- 객체는 재할당 없이 객체를 직접 변경할 수 있다.
- 프로퍼티를 동적으로 추가할수도, 삭제할 수도, 갱신할 수도 있다.
- A변수에 객체타입 값을 할당하고 B변수에 A변수를 할당하면 객체의 주소값이 복사가 된다. 즉 두개의 변수가 하나의 객체를 바라보는 것이다.
- 위 상황에서 A,B 변수에 할당된 객체는 하나의 메모리 공간에 저장된 하나의 값이다. 객체의 값을 어느 한쪽에서 변경 하더라도 두 변수에 모두 영향을 끼친다.
- 여러개의 식별자가 하나의 객체를 공유 할 수 있다.

> **얕은 복사(shallow copy)와 깊은 복사(deep copy)**
> 얕은복사에 대해서 깊게 생각하지는 않았는데 책에서는 깊은복사와 얕은복사에 대해서 알고있던 것과 다르게 설명한다. 다들 갸우뚱 했을것이라고 생각한다. 깊은 복사를 **객체 전체 뎁스를 아울러 원 객체(origin)와의 연결성(참조 관계)가 완전히 끊어지는 복사** 라고 규정 한다면 깊은복사가 아닌 복사는 모두 얕은복사라고 볼 수 있다.
> 그리고 위 규정이 의미가 있는 이유는 **깊은복사를 하는 이유를 생각 해봤을때 완벽한 깊은복사가 아니라면 깊은복사를 하는 이유에서 벗어나기 때문이다.** 라고 이해했다.

### 11.2.2. 참조에 의한 전달

- 객체를 가진 변수를 복사하면 원본변수와 복사된 변수 두 식별자가(변수) 하나의 객체를 공유한다.
